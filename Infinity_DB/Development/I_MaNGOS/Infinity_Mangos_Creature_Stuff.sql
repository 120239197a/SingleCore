-- Wotk update & fixes from live

-- ------------------------------
-- Scarlet Tracking_Hound (PET) -
-- ------------------------------

UPDATE `creature_template` SET `modelid_2` = 2709, `minlevel` = 31, `maxlevel` = 33, `minhealth` = 4228, `maxhealth` = 4228 WHERE `entry` = 6867;

-- -------------------
-- -------------------
-- -------------------

-- SET Diminishing Returns for taunt
UPDATE creature_template SET flags_extra = flags_extra|8192 WHERE rank = 3;

-- Not Diminishing Returns for taunt
UPDATE creature_template SET flags_extra = flags_extra&~8192 WHERE entry IN (
-- Instructor Razuvious
16061, 29940,
-- Toravon the Ice Watcher
38433, 38462,
-- Gormok the Impaler
34796, 35438, 35439, 35440,
-- Lady Deathwhisper
36855, 38106, 38296, 38297
);

-- ----------
-- ----------
-- ----------

-- Raise Ally
-- Commit 8f022d171f3e383e2e77
UPDATE `creature_template` SET `PowerType`='3', `ScriptName`='npc_risen_ally' WHERE `entry`='30230';
DELETE FROM `creature_spell` WHERE `guid` IN (30230);
INSERT INTO `creature_spell` (`guid`, `spell`, `index`, `active`, `disabled`, `flags`) VALUES
(30230, 62225, 0, 0, 0, 0),
(30230, 47480, 1, 0, 0, 0),
(30230, 47481, 2, 0, 0, 0),
(30230, 47482, 3, 0, 0, 0),
(30230, 47484, 4, 0, 0, 0),
(30230, 67886, 5, 0, 0, 0);

-- ---------
-- ---------
-- ---------

-- Creature on kill Reputation

UPDATE creature_onkill_reputation SET ChampioningAura = 57818 WHERE (RewOnKillRepFaction1= 1037 OR RewOnKillRepFaction2 = 1052) AND ChampioningAura = 0;

 -- Support for Championing system
DELETE FROM creature_onkill_reputation WHERE creature_id IN 
(30532,30529,30510,30540,30459,30457,30460,30478,
30485,30473,30516,30517,30519,30520,30521,30526,
30524,30528,30398,30397,30496,30508,30509,30498,
30522,30525,31469,31456,31465,31464,31475,31473,
31441,31471,31463,31450,31442,31443,31455,31466,
31451,31457,31460,31468,31472,31470,31474,31459,
31453,31452,31454,31449,30748,31673,31666,31663,
30747,31635,31658,31660,31661,31659,31667,31675,
31669,31681,31662,31679,31656,31676,31657,31680,
31665,31671,31678,31339,31347,31337,31357,31363,
31336,31359,31344,31343,31362,31350,31360,31355,
31354,31342,31351,31345,31340,31335,31352,31338,
31349,31356);

INSERT INTO creature_onkill_reputation VALUES
-- Nexus
(30532,1037,1052,7,0,150,7,0,150,1,57818), -- Ormorok the Tree-Shaper
(30529,1037,1052,7,0,150,7,0,150,1,57818), -- Anomalus
(30510,1037,1052,7,0,150,7,0,150,1,57818), -- Grand Magus Telestra
(30540,1037,1052,7,0,150,7,0,150,1,57818), -- Keristrasza
(30459,1037,1052,7,0,15,7,0,15,1,57818),
(30457,1037,1052,7,0,15,7,0,15,1,57818),
(30460,1037,1052,7,0,15,7,0,15,1,57818),
(30478,1037,1052,7,0,15,7,0,15,1,57818),
(30485,1037,1052,7,0,15,7,0,15,1,57818),
(30473,1037,1052,7,0,15,7,0,15,1,57818),
(30516,1037,1052,7,0,15,7,0,15,1,57818),
(30517,1037,1052,7,0,15,7,0,15,1,57818),
(30519,1037,1052,7,0,15,7,0,15,1,57818),
(30520,1037,1052,7,0,15,7,0,15,1,57818),
(30521,1037,1052,7,0,15,7,0,15,1,57818),
(30526,1037,1052,7,0,15,7,0,15,1,57818),
(30524,1037,1052,7,0,15,7,0,15,1,57818),
(30528,1037,1052,7,0,15,7,0,15,1,57818),
(30398,1037,1052,7,0,15,7,0,15,1,57818),
(30397,1037,1052,7,0,15,7,0,15,1,57818),
(30496,1037,1052,7,0,15,7,0,15,1,57818),
(30508,1037,1052,7,0,15,7,0,15,1,57818),
(30509,1037,1052,7,0,15,7,0,15,1,57818),
(30498,1037,1052,7,0,15,7,0,15,1,57818),
(30522,1037,1052,7,0,15,7,0,15,1,57818),
(30525,1037,1052,7,0,15,7,0,15,1,57818),

-- Ahn'kahet: The Old Kingdom
(31469,1037,1052,7,0,150,7,0,150,1,57818), -- Prince Taldaram
(31456,1037,1052,7,0,150,7,0,150,1,57818), -- Elder Nadox
(31465,1037,1052,7,0,150,7,0,150,1,57818), -- Jedoga Shadowseeker
(31464,1037,1052,7,0,150,7,0,150,1,57818), -- Herald Volazj
(31463,1037,1052,7,0,250,7,0,250,1,57818), -- Amanitar
(31475,1037,1052,7,0,15,7,0,15,1,57818), 
(31473,1037,1052,7,0,15,7,0,15,1,57818),
(31441,1037,1052,7,0,15,7,0,15,1,57818), 
(31471,1037,1052,7,0,15,7,0,15,1,57818),
(31450,1037,1052,7,0,15,7,0,15,1,57818),
(31442,1037,1052,7,0,15,7,0,15,1,57818),
(31443,1037,1052,7,0,15,7,0,15,1,57818),
(31455,1037,1052,7,0,15,7,0,15,1,57818),
(31466,1037,1052,7,0,15,7,0,15,1,57818),
(31451,1037,1052,7,0,15,7,0,15,1,57818),
(31457,1037,1052,7,0,15,7,0,15,1,57818),
(31460,1037,1052,7,0,15,7,0,15,1,57818),
(31468,1037,1052,7,0,15,7,0,15,1,57818),
(31472,1037,1052,7,0,15,7,0,15,1,57818),
(31470,1037,1052,7,0,15,7,0,15,1,57818),
(31474,1037,1052,7,0,15,7,0,15,1,57818),
(31459,1037,1052,7,0,15,7,0,15,1,57818),
(31453,1037,1052,7,0,15,7,0,15,1,57818),
(31452,1037,1052,7,0,15,7,0,15,1,57818),
(31454,1037,1052,7,0,15,7,0,15,1,57818),
(31449,1037,1052,7,0,15,7,0,15,1,57818),

-- Utgarde Keep
(30748,1037,1052,7,0,150,7,0,150,1,57818), -- Prince Keleseth
(31673,1037,1052,7,0,250,7,0,250,1,57818), -- Ingvar the Plunderer
(31679,1037,1052,7,0,150,7,0,150,1,57818), -- Skarvald the Constructor
(31656,1037,1052,7,0,150,7,0,150,1,57818), -- Dalronn the Controller
(31666,1037,1052,7,0,15,7,0,15,1,57818),
(31663,1037,1052,7,0,15,7,0,15,1,57818),
(30747,1037,1052,7,0,15,7,0,15,1,57818),
(31635,1037,1052,7,0,15,7,0,15,1,57818),
(31658,1037,1052,7,0,15,7,0,15,1,57818),
(31660,1037,1052,7,0,15,7,0,15,1,57818),
(31661,1037,1052,7,0,15,7,0,15,1,57818),
(31659,1037,1052,7,0,15,7,0,15,1,57818),
(31667,1037,1052,7,0,15,7,0,15,1,57818),
(31675,1037,1052,7,0,15,7,0,15,1,57818),
(31669,1037,1052,7,0,15,7,0,15,1,57818),
(31681,1037,1052,7,0,15,7,0,15,1,57818),
(31662,1037,1052,7,0,15,7,0,15,1,57818),
(31676,1037,1052,7,0,15,7,0,15,1,57818),
(31657,1037,1052,7,0,15,7,0,15,1,57818),
(31680,1037,1052,7,0,15,7,0,15,1,57818),
(31665,1037,1052,7,0,15,7,0,15,1,57818),
(31671,1037,1052,7,0,15,7,0,15,1,57818),
(31678,1037,1052,7,0,15,7,0,15,1,57818),

-- Drak'Tharon Keep
(31362,1037,1052,7,0,150,7,0,150,1,57818), -- Trollgore 
(31350,1037,1052,7,0,150,7,0,150,1,57818), -- Novos the Summoner
(31360,1037,1052,7,0,250,7,0,250,1,57818), -- The Prophet Tharon'ja
(31349,1037,1052,7,0,150,7,0,150,1,57818), -- King Dred
(31339,1037,1052,7,0,15,7,0,15,1,57818),
(31347,1037,1052,7,0,15,7,0,15,1,57818),
(31337,1037,1052,7,0,15,7,0,15,1,57818),
(31357,1037,1052,7,0,15,7,0,15,1,57818),
(31363,1037,1052,7,0,15,7,0,15,1,57818),
(31336,1037,1052,7,0,15,7,0,15,1,57818),
(31359,1037,1052,7,0,15,7,0,15,1,57818),
(31344,1037,1052,7,0,15,7,0,15,1,57818),
(31343,1037,1052,7,0,15,7,0,15,1,57818),
(31355,1037,1052,7,0,15,7,0,15,1,57818),
(31354,1037,1052,7,0,15,7,0,15,1,57818),
(31342,1037,1052,7,0,15,7,0,15,1,57818),
(31351,1037,1052,7,0,15,7,0,15,1,57818),
(31345,1037,1052,7,0,15,7,0,15,1,57818),
(31340,1037,1052,7,0,15,7,0,15,1,57818),
(31335,1037,1052,7,0,15,7,0,15,1,57818),
(31352,1037,1052,7,0,15,7,0,15,1,57818),
(31338,1037,1052,7,0,15,7,0,15,1,57818),
(31356,1037,1052,7,0,15,7,0,15,1,57818);

-- Azjol-Nerub
DELETE FROM creature_onkill_reputation WHERE creature_id IN (31612, 31616, 31615, 31617, 31608, 31605, 31606, 31592, 31589, 31594, 31601, 31590, 31595, 31602, 31591, 31596, 31610, 31604, 31609, 31611);
INSERT INTO creature_onkill_reputation VALUES 
(31612, 1037, 1052, 7, 0, 250, 7, 0, 250, 1, 57818),
(31616, 1037, 1052, 7, 0, 15, 7, 0, 15, 1, 57818),
(31615, 1037, 1052, 7, 0, 15, 7, 0, 15, 1, 57818),
(31617, 1037, 1052, 7, 0, 15, 7, 0, 15, 1, 57818),
(31608, 1037, 1052, 7, 0, 14, 7, 0, 14, 1, 57818),
(31605, 1037, 1052, 7, 0, 14, 7, 0, 14, 1, 57818),
(31606, 1037, 1052, 7, 0, 14, 7, 0, 14, 1, 57818),
(31592, 1037, 1052, 7, 0, 15, 7, 0, 15, 1, 57818),
(31589, 1037, 1052, 7, 0, 4, 7, 0, 4, 1, 57818),
(31594, 1037, 1052, 7, 0, 4, 7, 0, 4, 1, 57818),
(31601, 1037, 1052, 7, 0, 4, 7, 0, 4, 1, 57818),
(31590, 1037, 1052, 7, 0, 4, 7, 0, 4, 1, 57818),
(31595, 1037, 1052, 7, 0, 4, 7, 0, 4, 1, 57818),
(31602, 1037, 1052, 7, 0, 4, 7, 0, 4, 1, 57818),
(31591, 1037, 1052, 7, 0, 4, 7, 0, 4, 1, 57818),
(31596, 1037, 1052, 7, 0, 4, 7, 0, 4, 1, 57818),
(31610, 1037, 1052, 7, 0, 250, 7, 0, 250, 1, 57818),
(31604, 1037, 1052, 7, 0, 16, 7, 0, 16, 1, 57818),
(31611, 1037, 1052, 7, 0, 250, 7, 0, 250, 1, 57818),
(31609, 1037, 1052, 7, 0, 14, 7, 0, 14, 1, 57818);

-- Halls of Lightning
DELETE FROM creature_onkill_reputation WHERE creature_id IN (28961, 28965, 29240, 28546, 28547, 28826, 28578, 28579, 28835, 28580, 28836, 28581, 28837, 28582, 28838, 28583, 28584, 28585, 28586, 28587, 28920, 28923);
INSERT INTO creature_onkill_reputation VALUES 
(28961, 1037, 1052, 7, 0, 3, 7, 0, 3, 1, 57818),
(28965, 1037, 1052, 7, 0, 3, 7, 0, 3, 1, 57818),
(29240, 1037, 1052, 7, 0, 3, 7, 0, 3, 1, 57818),
(28546, 1037, 1052, 7, 0, 70, 7, 0, 70, 1, 57818),
(28547, 1037, 1052, 7, 0, 3, 7, 0, 3, 1, 57818),
(28826, 1037, 1052, 7, 0, 3, 7, 0, 3, 1, 57818),
(28578, 1037, 1052, 7, 0, 3, 7, 0, 3, 1, 57818),
(28579, 1037, 1052, 7, 0, 3, 7, 0, 3, 1, 57818),
(28835, 1037, 1052, 7, 0, 4, 7, 0, 4, 1, 57818),
(28580, 1037, 1052, 7, 0, 3, 7, 0, 3, 1, 57818),
(28836, 1037, 1052, 7, 0, 3, 7, 0, 3, 1, 57818),
(28581, 1037, 1052, 7, 0, 3, 7, 0, 3, 1, 57818),
(28837, 1037, 1052, 7, 0, 3, 7, 0, 3, 1, 57818),
(28582, 1037, 1052, 7, 0, 3, 7, 0, 3, 1, 57818),
(28838, 1037, 1052, 7, 0, 3, 7, 0, 3, 1, 57818),
(28583, 1037, 1052, 7, 0, 3, 7, 0, 3, 1, 57818),
(28584, 1037, 1052, 7, 0, 3, 7, 0, 3, 1, 57818),
(28585, 1037, 1052, 7, 0, 1, 7, 0, 1, 1, 57818),
(28586, 1037, 1052, 7, 0, 70, 7, 0, 70, 1, 57818),
(28587, 1037, 1052, 7, 0, 70, 7, 0, 70, 1, 57818),
(28920, 1037, 1052, 7, 0, 5, 7, 0, 5, 1, 57818),
(28923, 1037, 1052, 7, 0, 70, 7, 0, 70, 1, 57818);
DELETE FROM creature_onkill_reputation WHERE creature_id IN (30980, 30982, 30973, 31537, 30979, 30978, 30967, 30966, 30971, 30968, 30975, 30977, 30976, 30974, 30981, 30964, 30983, 30970, 31533, 31536, 30972, 31538);
INSERT INTO creature_onkill_reputation VALUES 
(30980, 1037, 1052, 7, 0, 10, 7, 0, 10, 1, 57818),
(30982, 1037, 1052, 7, 0, 10, 7, 0, 10, 1, 57818),
(30973, 1037, 1052, 7, 0, 10, 7, 0, 10, 1, 57818),
(31537, 1037, 1052, 7, 0, 250, 7, 0, 250, 1, 57818),
(30979, 1037, 1052, 7, 0, 10, 7, 0, 10, 1, 57818),
(30978, 1037, 1052, 7, 0, 10, 7, 0, 10, 1, 57818),
(30967, 1037, 1052, 7, 0, 10, 7, 0, 10, 1, 57818),
(30966, 1037, 1052, 7, 0, 10, 7, 0, 10, 1, 57818),
(30971, 1037, 1052, 7, 0, 14, 7, 0, 14, 1, 57818),
(30968, 1037, 1052, 7, 0, 10, 7, 0, 10, 1, 57818),
(30975, 1037, 1052, 7, 0, 10, 7, 0, 10, 1, 57818),
(30977, 1037, 1052, 7, 0, 10, 7, 0, 10, 1, 57818),
(30976, 1037, 1052, 7, 0, 10, 7, 0, 10, 1, 57818),
(30974, 1037, 1052, 7, 0, 10, 7, 0, 10, 1, 57818),
(30981, 1037, 1052, 7, 0, 10, 7, 0, 10, 1, 57818),
(30964, 1037, 1052, 7, 0, 10, 7, 0, 10, 1, 57818),
(30983, 1037, 1052, 7, 0, 10, 7, 0, 10, 1, 57818),
(30970, 1037, 1052, 7, 0, 1, 7, 0, 1, 1, 57818),
(31533, 1037, 1052, 7, 0, 250, 7, 0, 250, 1, 57818),
(31536, 1037, 1052, 7, 0, 250, 7, 0, 250, 1, 57818),
(30972, 1037, 1052, 7, 0, 16, 7, 0, 16, 1, 57818),
(31538, 1037, 1052, 7, 0, 250, 7, 0, 250, 1, 57818);

-- Icecrown Citadel (only UDB)
DELETE FROM creature_onkill_reputation WHERE RewOnKillRepFaction1 = 1156;
INSERT INTO creature_onkill_reputation VALUES
(37011,1156,0,7,0,15,0,0,0,0,0),
(36724,1156,0,7,0,15,0,0,0,0,0),
(37012,1156,0,7,0,15,0,0,0,0,0),
(36725,1156,0,7,0,15,0,0,0,0,0),
(36612,1156,0,7,0,250,0,0,0,0,0),
(36855,1156,0,7,0,250,0,0,0,0,0),
(36805,1156,0,7,0,15,0,0,0,0,0),
(36811,1156,0,7,0,15,0,0,0,0,0),
(36807,1156,0,7,0,15,0,0,0,0,0),
(36808,1156,0,7,0,15,0,0,0,0,0),
(36829,1156,0,7,0,50,0,0,0,0,0),
(37017,1156,0,7,0,15,0,0,0,0,0),
(37021,1156,0,7,0,15,0,0,0,0,0),
(37027,1156,0,7,0,15,0,0,0,0,0),
(37144,1156,0,7,0,15,0,0,0,0,0),
(36998,1156,0,7,0,15,0,0,0,0,0),
(37146,1156,0,7,0,15,0,0,0,0,0),
(37032,1156,0,7,0,15,0,0,0,0,0),
(37149,1156,0,7,0,15,0,0,0,0,0),
(37230,1156,0,7,0,50,0,0,0,0,0),
(37813,1156,0,7,0,250,0,0,0,0,0),
(37098,1156,0,7,0,50,0,0,0,0,0),
(37022,1156,0,7,0,30,0,0,0,0,0),
(37038,1156,0,7,0,15,0,0,0,0,0),
(37023,1156,0,7,0,15,0,0,0,0,0),
(36880,1156,0,7,0,50,0,0,0,0,0),
(37217,1156,0,7,0,150,0,0,0,0,0),
(37025,1156,0,7,0,150,0,0,0,0,0),
(36627,1156,0,7,0,250,0,0,0,0,0),
(36626,1156,0,7,0,250,0,0,0,0,0),
(37571,1156,0,7,0,30,0,0,0,0,0),
(37663,1156,0,7,0,15,0,0,0,0,0),
(37664,1156,0,7,0,15,0,0,0,0,0),
(37595,1156,0,7,0,15,0,0,0,0,0),
(37957,1156,0,7,0,250,0,0,0,0,0),
(37958,1156,0,7,0,250,0,0,0,0,0),
(37959,1156,0,7,0,250,0,0,0,0,0),
(38106,1156,0,7,0,250,0,0,0,0,0),
(38296,1156,0,7,0,250,0,0,0,0,0),
(38297,1156,0,7,0,250,0,0,0,0,0),
(38402,1156,0,7,0,250,0,0,0,0,0),
(38582,1156,0,7,0,250,0,0,0,0,0),
(38583,1156,0,7,0,250,0,0,0,0,0),
(37504,1156,0,7,0,250,0,0,0,0,0),
(37505,1156,0,7,0,250,0,0,0,0,0),
(37506,1156,0,7,0,250,0,0,0,0,0),
(38390,1156,0,7,0,250,0,0,0,0,0),
(38549,1156,0,7,0,250,0,0,0,0,0),
(38550,1156,0,7,0,250,0,0,0,0,0),
(36678,1156,0,7,0,250,0,0,0,0,0),
(38431,1156,0,7,0,250,0,0,0,0,0),
(38585,1156,0,7,0,250,0,0,0,0,0),
(38586,1156,0,7,0,250,0,0,0,0,0),
(37970,1156,0,7,0,250,0,0,0,0,0),
(38401,1156,0,7,0,250,0,0,0,0,0),
(38784,1156,0,7,0,250,0,0,0,0,0),
(38785,1156,0,7,0,250,0,0,0,0,0),
(37955,1156,0,7,0,250,0,0,0,0,0),
(38434,1156,0,7,0,250,0,0,0,0,0),
(38435,1156,0,7,0,250,0,0,0,0,0),
(38436,1156,0,7,0,250,0,0,0,0,0),
(36789,1156,0,7,0,250,0,0,0,0,0),
(38174,1156,0,7,0,250,0,0,0,0,0),
(36853,1156,0,7,0,250,0,0,0,0,0),
(38265,1156,0,7,0,250,0,0,0,0,0),
(38266,1156,0,7,0,250,0,0,0,0,0),
(38267,1156,0,7,0,250,0,0,0,0,0),
(36597,1156,0,7,0,1500,0,0,0,0,0),
(39166,1156,0,7,0,1500,0,0,0,0,0),
(39167,1156,0,7,0,1500,0,0,0,0,0),
(39168,1156,0,7,0,1500,0,0,0,0,0),
(37126,1156,0,7,0,500,0,0,0,0,0),
(38258,1156,0,7,0,500,0,0,0,0,0),
(38057,1156,0,7,0,15,0,0,0,0,0),
(38058,1156,0,7,0,15,0,0,0,0,0),
(38075,1156,0,7,0,15,0,0,0,0,0),
(38073,1156,0,7,0,15,0,0,0,0,0),
(38076,1156,0,7,0,15,0,0,0,0,0),
(38072,1156,0,7,0,15,0,0,0,0,0),
(38074,1156,0,7,0,50,0,0,0,0,0),
(37655,1156,0,7,0,50,0,0,0,0,0),
(38061,1156,0,7,0,15,0,0,0,0,0),
(38059,1156,0,7,0,15,0,0,0,0,0),
(38108,1156,0,7,0,30,0,0,0,0,0),
(38062,1156,0,7,0,15,0,0,0,0,0),
(38064,1156,0,7,0,150,0,0,0,0,0),
(38063,1156,0,7,0,15,0,0,0,0,0),
(38418,1156,0,7,0,50,0,0,0,0,0),
(38103,1156,0,7,0,150,0,0,0,0,0),
(38444,1156,0,7,0,50,0,0,0,0,0),
(38098,1156,0,7,0,30,0,0,0,0,0),
(38100,1156,0,7,0,15,0,0,0,0,0),
(38480,1156,0,7,0,15,0,0,0,0,0),
(38099,1156,0,7,0,15,0,0,0,0,0),
(38082,1156,0,7,0,15,0,0,0,0,0),
(37007,1156,0,7,0,250,0,0,0,0,0),
(38031,1156,0,7,0,250,0,0,0,0,0);

-- -----------
-- -----------
-- -----------

-- Lightwell
-- Commit 97e7463c82ad95cdc63f

DELETE FROM `creature_template_addon` WHERE `entry` IN (31897, 31896, 31895, 31894, 31893, 31883);
INSERT INTO `creature_template_addon`
    (`entry`, `auras`)
VALUES 
    (31897,59907),
    (31896,59907),
    (31895,59907),
    (31894,59907),
    (31893,59907),
    (31883,59907);

UPDATE `creature_template` SET `unit_flags`='4', `flags_extra`='2' WHERE `entry` IN (31897, 31896, 31895, 31894, 31893, 31883);

DELETE FROM `npc_spellclick_spells` WHERE `npc_entry` IN (31897, 31896, 31895, 31894, 31893, 31883);
INSERT INTO `npc_spellclick_spells`
    (`npc_entry`, `spell_id`, `quest_start`, `cast_flags`)
VALUES 
    (31897,60123,0,2),
    (31896,60123,0,2),
    (31895,60123,0,2),
    (31894,60123,0,2),
    (31893,60123,0,2),
    (31883,60123,0,2);

-- --------
-- --------
-- --------

-- example for creature_linking
/* Example behaviour, MOLTEN CORE
 *
 *  TEST WITHOUT SD2, as SD2 has parts of the same functionality already
 *
 * Currently implemented flags
 *   FLAG_AGGRO_ON_AGGRO            = 0x0001,    1
 *   FLAG_TO_AGGRO_ON_AGGRO         = 0x0002,    2
 *   FLAG_RESPAWN_ON_EVADE          = 0x0004,    4
 *   FLAG_TO_RESPAWN_ON_EVADE       = 0x0008,    8
 *   FLAG_DESPAWN_ON_DEATH          = 0x0010,   16
 *   FLAG_SELFKILL_ON_DEATH         = 0x0020,   32
 *   FLAG_RESPAWN_ON_DEATH          = 0x0040,   64
 *   FLAG_RESPAWN_ON_RESPAWN        = 0x0080,  128
 *   FLAG_DESPAWN_ON_RESPAWN        = 0x0100,  256
 *   FLAG_FOLLOW                    = 0x0200,  512
 *   FLAG_CANT_SPAWN_IF_BOSS_DEAD   = 0x0400, 1024
 *   FLAG_CANT_SPAWN_IF_BOSS_ALIVE  = 0x0800, 2048
 */

INSERT IGNORE INTO creature_linking_template (entry, map, master_entry, flag) VALUES
(12119, 409, 12118, 521), -- Lucifron
(11661, 409, 12259, 7), -- Gehennas
(11673, 409, 11982, 1024), -- Magmadar, testing, prevent respawning of his dogs
(12099, 409, 12057, 2), -- Garr (testing)
(11672, 409, 11988, 39), -- Golemagg
(11666, 409, 12057, 7), -- Garr- testing, despawn other npcs in area
(11662, 409, 12098, 135), -- Sulfuron (test)
(11658, 409, 448, 256); -- testing..

-- ----------
-- ----------
-- ----------

-- Creature template
-- Commit 91fff03866982767a654

UPDATE `creature_spell` SET `spell`='55328' WHERE `guid`='3579';
UPDATE `creature_spell` SET `spell`='55329' WHERE `guid`='3911';
UPDATE `creature_spell` SET `spell`='55330' WHERE `guid`='3912';
UPDATE `creature_spell` SET `spell`='55332' WHERE `guid`='3913';
UPDATE `creature_spell` SET `spell`='55333' WHERE `guid`='7398';
UPDATE `creature_spell` SET `spell`='55335' WHERE `guid`='7399';
UPDATE `creature_spell` SET `spell`='55278' WHERE `guid`='15478';
UPDATE `creature_spell` SET `spell`='58589' WHERE `guid`='31120';
UPDATE `creature_spell` SET `spell`='58590' WHERE `guid`='31121';
UPDATE `creature_spell` SET `spell`='58591' WHERE `guid`='31122';

-- Goregek
UPDATE `creature_template` SET `minlevel` = 76, `maxlevel` = 80, `minhealth` = 4200, `maxhealth` = 4200, `flags_extra` = `flags_extra` | 2048 WHERE `entry` = 28214;

DELETE FROM `creature_spell` WHERE `guid` IN (28214);
INSERT INTO `creature_spell` (`guid`, `spell`, `index`) VALUES
(28214, 52743, 0),
(28214, 52744, 1),
(28214, 54188, 2),
(28214, 54178, 3),
(28214, 52748, 4);
-- (28214, 51959, 5);

-- Charged War Golem from Venom
DELETE FROM `creature_spell` WHERE `guid` IN (29005);
INSERT INTO `creature_spell` (`guid`, `spell`, `index`) VALUES
(29005, 61380, 0),
(29005, 47911, 1);

-- ----------
-- ----------
-- ----------

/* Stoneclaw Totem */
REPLACE INTO creature_spell (guid, spell, `index`, active, disabled, flags) VALUES 
('3579', '55328', '1', '0', '0', '0'),
('3911', '55329', '1', '0', '0', '0'),
('3912', '55330', '1', '0', '0', '0'),
('3913', '55332', '1', '0', '0', '0'),
('7398', '55333', '1', '0', '0', '0'),
('7399', '55335', '1', '0', '0', '0'),
('15478', '55278', '1', '0', '0', '0'),
('31120', '58589', '1', '0', '0', '0'),
('31121', '58590', '1', '0', '0', '0'),
('31122', '58591', '1', '0', '0', '0');

-- -------------------------
-- creature template addon =
-- -------------------------

-- Fix speed of oculus drakes
UPDATE `creature_template_addon` SET `auras`='50325' WHERE `entry` IN (27755,27692,27756);
-- fix shadowfiend
UPDATE `creature_template_addon` SET `b2_1_pvp_state` = 40, `auras` = '34429' WHERE `entry` = 19668;

-- Fixup DB
DELETE FROM `creature_template_addon` WHERE `entry` IN (27241,27268,27661,27662, 27241, 31884, 24751, 28816, 29836, 38248, 30268, 32222, 38308, 38309, 29838, 29982, 30935, 30934);
DELETE FROM `creature_addon` WHERE `guid` IN (93924);

UPDATE `creature_template_addon` SET `auras` = '50494' WHERE `entry` =28006;
UPDATE `creature_template_addon` SET `auras` = '18950' WHERE `entry` IN (36938, 36658);
UPDATE `creature_template_addon` SET `auras` = '69012 69413' WHERE `entry` IN (36477, 37629);

DELETE FROM `creature` WHERE `id` IN (SELECT `accessory_entry` FROM `vehicle_accessory`);

